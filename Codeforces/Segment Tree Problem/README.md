# Problem 339D

很明显的树形结构

这一次我使用了zkw线段树来写，只是在得到目前在树中的哪一层的时候有点蠢

写的时候使用的办法是对于每一个索引，要乘以多少次2才能到达[n, 2*n)的范围

现在觉得其实可以把线段树数组开成结构体，同时存在一维表示这个结点所在的高度，只需要一遍预处理即可

# Problem 356A

题目描述：有一些骑士，排成一列要进行比赛，他们的编号从1 ～ n   现在按照时间顺序给出m组信息，形式为 `l, r, x`。表示在`l ~ r`这个范围内存活的骑士进行比赛，最终只有编号为 $x$ 的骑士获胜。在每场比赛结束之后，失败的骑士离去。现在要求在给出m组信息之后，输出每位骑士被谁打败

结点染色问题，包含有时间戳

当骑士尚未被打败的时候，认为上面的时间戳为0，打败他的骑士为0

当某个骑士被打败之后，修改当前的时间戳，修改打败他的骑士

当出现区间重复覆盖的时候，这个区间不可以被重复染色

---

在打印某个结点的最终结果的时候，应该从这个结点出发，访问所有覆盖到这个结点的父节点

寻找到一个最早的时间戳，找到这个时间戳对应的打败他的骑士即可

因为这里我使用 0 表示了没有被打败的状态，所以最早的时间戳应该使用一个相对较大的数字来表示

否则 0 会把其他时间戳覆盖掉

---

因为zkw线段树的下标是从 0 ~ n - 1进行标记的，而一般题目中的标记是1 ~ n；并且可以操作的区间是左闭右开，这就使得操作的时候存在一个转换，脑袋很容易糊掉

这个问题就将来慢慢总结吧

# Problem 459D

题目描述：定义一个函数$f(l, r, x) = \text{appearing times of x in range[l, r]}$， 试求`i j`个数

它们满足$f(1, i, a[i]) > f(j, n, a[j])$	

权值线段树

本题可以向逆序对靠拢，将原数组进行转化，得到两个新的数组。一个用来记录从左边开始到现在，目前的数出现了多少次，另外一个数组记录从右边到现在，这个数字出现了多少次

于是现在我可以从右至左的插入第二个数组的元素，而每次检验0 ～ 第一个数组对应位置元素区间内的和

---

虽然思路很清晰。。然而还是跟六个月前犯的错误一样。。整数溢出了。。

![Figure1](https://github.com/qhb1001/For-that-dream/blob/master/Codeforces/Segment%20Tree%20Problem/Figure1.png)

