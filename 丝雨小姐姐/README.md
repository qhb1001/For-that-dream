# Problem D 

#### qhb

解法一：线段树，简单不用动脑袋

---

解法二：单调队列

这是我第一次写单调队列的题目，所以对思路记录地详细一些

单调队列，实际上不是优先队列，也不是队列，而是双端队列

并且这个单调性质是需要自己去维护的

做这种题目似乎跟二分题目有一些类似，关键的是要发现单调的性质

举个🌰，对于我关心的最小值，当新加入一个元素时，我要从后面开始推入这个元素

如果目前队尾的元素比要推入的元素大，那么新推入的元素即为新的最小值，此时这些比它大的元素都已经没有作用了，可以pop出去

如果目前队尾的元素比要推入的元素小，那么这个元素仍是可能需要使用的，所以仍然要推入这个元素

虽然一开始我想要维护的队列是一个自大到小排列的。。可是这些性质推着推着就发现应该是从小到大

殊途同归啊



现在开始推最大值的获取

如果目前队尾的元素比要推入的元素大，那么仍然要推入

如果目前队尾的元素比要推入的元素小，那么需要进行pop



现在开始推到在进行状态转移的时候，应该不在window范围的那个元素可能在什么地方

拿最大值为例，如果它是最大值，那么此时必然在队首，在 for 循环下判断即可

如果新的最大值不是要推出的那个元素，而是目前即将推入的元素以及那个元素之间的某个值，那么根据单调队列的性质可以知道，最大值在推入的时候，必定已经把那个元素pop出去了

如果目前要推入元素时最大值，那么会将单调队列pop空，之后把自己push进去

所以每次只需要判断队首是否在范围内即可